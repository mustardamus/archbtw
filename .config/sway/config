set $mod Mod4
set $alt Mod1

set $term foot
set $browser librewolf
set $files thunar
set $menu fuzzel
# set $menu exec $term -a launcher -e fish -c sway-launcher-desktop

set $left h
set $down j
set $up k
set $right l

set $gnome-schema org.gnome.desktop.interface

exec_always {
    gsettings set $gnome-schema gtk-theme 'Qogir-Dark'
    gsettings set $gnome-schema icon-theme 'Papirus-Dark'
    gsettings set $gnome-schema font-name 'NotoSans Nerd Font 11'
    gsettings set $gnome-schema monospace-font-name 'Inconsolata Nerd Font 11'
    # gsettings set $gnome-schema cursor-theme 'Your cursor Theme'
}

exec_always --no-startup-id workstyle &> /tmp/workstyle.log
exec autotiling -l 2
exec waybar
exec nm-applet
exec keepassxc
exec swaymsg "workspace 1; exec librewolf"
exec wl-paste -t text --watch clipman store --no-persist
exec mako
exec dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP=sway

# turn of the "always on" led for microphone muting. check state in waybar
exec bash -c "echo 0 | sudo tee /sys/class/leds/platform::micmute/brightness"

# open apps on specific workspace
# find app_id/title with `swaymsg -t get_tree`
assign [title="Transmission"] 9
assign [title="KeePassXC"] 10

for_window [app_id="^launcher$"] floating enable, sticky enable, resize set 30 ppt 60 ppt, border pixel 1
for_window [app_id="^keymap-overlay$"] floating enable, sticky enable, resize set 50 ppt 70 ppt, border pixel 1
for_window [title="Picture-in-Picture"] floating enable, border pixel 1
for_window [class="KeePassXC" title="Generate Password"] floating enable, border pixel 1
for_window [class="KeePassXC" title=".*[Cc]onfirm.*"] floating enable, border pixel 1
for_window [class="KeePassXC" window_role="dialog"] floating enable, border pixel 1
for_window [window_type="dialog"] floating enable, border pixel 1
# for_window [title="yad"] floating enable

### Output configuration
#
# Default wallpaper (more resolutions are available in /usr/share/backgrounds/sway/)
# output * bg /usr/share/backgrounds/sway/Sway_Wallpaper_Blue_1920x1080.png fill
#
# Example configuration:
#
#   output HDMI-A-1 resolution 1920x1080 position 1920,0
#
# You can get the names of your outputs by running: swaymsg -t get_outputs

### Idle configuration
#
# Example configuration:
#
# exec swayidle -w \
#          timeout 300 'swaylock -f -c 000000' \
#          timeout 600 'swaymsg "output * power off"' resume 'swaymsg "output * power on"' \
#          before-sleep 'swaylock -f -c 000000'
#
# This will lock your screen after 300 seconds of inactivity, then turn off
# your displays after another 300 seconds, and turn your screens back on when
# resumed. It will also lock your screen before your computer goes to sleep.

input type:touchpad {
    dwt enabled
    tap enabled
    tap_button_map lrm
    natural_scroll disabled
    middle_emulation disabled
    click_method clickfinger
    accel_profile adaptive
    pointer_accel 0.3
}

input type:keyboard {
    xkb_layout "de"
    repeat_delay 300
    repeat_rate 30
}

bindsym $mod+$alt+1 exec liferea
bindsym $mod+$alt+2 exec chromium

bindsym $mod+Shift+q kill
bindsym $mod+Return exec $term
bindsym $mod+Shift+Return exec $browser
bindsym $mod+$alt+Return exec $files
bindsym $mod+space exec $menu
bindsym $mod+Shift+c reload
bindsym $mod+Shift+e exec swaynag -t warning -m 'Exit sway?' -B 'Yes' 'swaymsg exit'

bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

bindsym $mod+Shift+$left move left
bindsym $mod+Shift+$down move down
bindsym $mod+Shift+$up move up
bindsym $mod+Shift+$right move right
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 10

bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9
bindsym $mod+Shift+0 move container to workspace number 10

bindsym $mod+b splith
bindsym $mod+v splitv

bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

bindsym $mod+f fullscreen
bindsym $mod+Shift+space floating toggle
bindsym $mod+$alt+space focus mode_toggle
bindsym $mod+a focus parent

bindsym $mod+Shift+minus move scratchpad
bindsym $mod+minus scratchpad show

mode "resize" {
    bindsym $left resize shrink width 10px
    bindsym $down resize grow height 10px
    bindsym $up resize shrink height 10px
    bindsym $right resize grow width 10px
    bindsym Left resize shrink width 10px
    bindsym Down resize grow height 10px
    bindsym Up resize shrink height 10px
    bindsym Right resize grow width 10px
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

bindsym --locked XF86AudioMute exec pactl set-sink-mute \@DEFAULT_SINK@ toggle
bindsym --locked XF86AudioLowerVolume exec pactl set-sink-volume \@DEFAULT_SINK@ -5%
bindsym --locked XF86AudioRaiseVolume exec pactl set-sink-volume \@DEFAULT_SINK@ +5%
bindsym --locked XF86AudioMicMute exec pactl set-source-mute \@DEFAULT_SOURCE@ toggle

bindsym --locked XF86MonBrightnessDown exec brightnessctl set 5%-
bindsym --locked XF86MonBrightnessUp exec brightnessctl set 5%+
bindsym XF86Display exec bash ~/.config/i3/brightness_toggle.sh

bindsym $mod+Print exec grim
# Fn+F11 key for monitor setup
bindcode 455 exec bash ~/.config/sway/monitor_setup.sh

bindsym $mod+question exec $term -a keymap-overlay -e helix ~/notes/keymap.md

# Qogir-Dark theme colors
set $bg      #282A33
set $bg_sec  #32343D
set $panel   #21232b
set $fg      #e6ebef
set $text    #e0e5eb
set $accent  #5294e2
set $success #27AE60
set $warning #F27835
set $error   #FC4138
set $link    #2980B9
set $active  #3DAEE9

client.focused $accent $bg_sec $fg $active $accent
client.unfocused $bg $bg $text $bg $bg
client.urgent $error $bg_sec $fg $warning $error

floating_modifier $mod normal
smart_borders on
default_border pixel 1
titlebar_padding 8 2
titlebar_border_thickness 2

# Prevent crashes on hotplug by explicitly configuring outputs
output * scale 1

# Configure external monitor positioning (adjust as needed)
output DP-1 position 1366,0
output DP-2 position 1366,0
output HDMI-A-1 position 1366,0
